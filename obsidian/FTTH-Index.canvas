{
  "nodes": [
    {
      "id": "architecture_overview",
      "x": -400,
      "y": -200,
      "width": 300,
      "height": 200,
      "type": "text",
      "text": "# üèóÔ∏è FTTH Management System Architecture\n\n**Sistema Gestionale FTTH Enterprise Completo**\n\n- ‚úÖ **Backend FastAPI**: 11 moduli API (works, technicians, teams, stats, auth, telegram, documents, health, manual, debug)\n- ‚úÖ **Database Complesso**: 7 modelli (Work, Technician, Team, WorkEvent, Document, User, DocumentAppliedWork)\n- ‚úÖ **Architettura Containerizzata**: 7 servizi Docker (backend, postgres, redis, nginx, telegram-bot, prometheus, grafana)\n- ‚úÖ **Sicurezza Zero-Trust**: Yggdrasil IPv6 + API separata dedicata\n- ‚úÖ **Integrazioni Avanzate**: Telegram Bot, OCR, GPT-4, WebSocket\n\n**Status**: Production Ready & Enterprise-Grade"
    },
    {
      "id": "core_components",
      "x": 0,
      "y": -200,
      "width": 250,
      "height": 180,
      "type": "text",
      "text": "# üîß Core Components\n\n## Backend Layer (FastAPI)\n- **11 Route Modules**: works, technicians, teams, stats, auth, telegram, documents, health, manual, debug\n- **Database ORM**: SQLAlchemy con PostgreSQL\n- **Security**: JWT + API Keys + CORS\n\n## Container Ecosystem\n- **7 Docker Services**: backend, postgres, redis, nginx, telegram-bot, prometheus, grafana\n- **Networks**: ftth-network bridge\n- **Volumes**: Persistent data storage\n\n## Advanced Features\n- **OCR Integration**: pytesseract + pdfplumber\n- **GPT-4 Integration**: AI-powered automation\n- **WebSocket Support**: Real-time updates"
    },
    {
      "id": "workflow_daily",
      "x": -400,
      "y": 50,
      "width": 200,
      "height": 150,
      "type": "text",
      "text": "# üîÑ Daily Workflow\n\n## Morning Check\n1. **Container Status**: `docker-compose ps`\n2. **API Health**: `/health` endpoint\n3. **Database**: PostgreSQL connectivity\n4. **Yggdrasil**: Network status\n\n## Operations\n- Monitor WR processing via Telegram\n- Check OCR document parsing\n- Review GPT automation logs\n- Validate real-time sync\n\n## Maintenance\n- Update SSL certificates\n- Clean Docker logs\n- Backup PostgreSQL data"
    },
    {
      "id": "troubleshooting",
      "x": 200,
      "y": 50,
      "width": 200,
      "height": 150,
      "type": "text",
      "text": "# üÜò Troubleshooting\n\n## Container Issues\n- üî¥ Docker services down\n- üî¥ Network connectivity\n- üî¥ Volume permissions\n- üî¥ Health checks failing\n\n## API Issues\n- üî¥ FastAPI routes not responding\n- üî¥ Database connection errors\n- üî¥ Authentication failures\n- üî¥ OCR/GPT integration problems\n\n## Integration Issues\n- üî¥ Telegram bot not responding\n- üî¥ Yggdrasil API unreachable\n- üî¥ WebSocket connections failing"
    },
    {
      "id": "module_canvas_links",
      "x": -100,
      "y": 250,
      "width": 400,
      "height": 200,
      "type": "text",
      "text": "# üìö Module Canvas\n\n## Core Modules\n- [[FTTH-Backend-Module.canvas|Backend FastAPI (11 routes)]]\n- [[FTTH-Yggdrasil-Module.canvas|Yggdrasil Network & API]]\n- [[FTTH-Apache-Module.canvas|Apache Reverse Proxy]]\n- [[FTTH-Database-Module.canvas|PostgreSQL + Redis]]\n- [[FTTH-Telegram-Module.canvas|Telegram Bot Integration]]\n- [[FTTH-Security-Module.canvas|Zero-Trust Security]]\n- [[FTTH-Monitoring-Module.canvas|Prometheus + Grafana]]\n\n## Advanced Features\n- [[FTTH-AI-OCR-Module.canvas|AI & OCR Processing]]\n- [[FTTH-WebSocket-Module.canvas|WebSocket Real-Time]]\n- [[FTTH-Utils-Modules.canvas|Utils & Helper Functions]]\n\n## New Discoveries\n- **OCR Processing**: pytesseract integration\n- **GPT-4 Automation**: AI-powered workflow\n- **WebSocket Real-time**: Live updates\n- **Utils Collection**: 6 utility modules\n- **Enterprise Security**: Multi-layer protection"
    },
    {
      "id": "installation_flow",
      "x": -600,
      "y": 50,
      "width": 180,
      "height": 120,
      "type": "text",
      "text": "# üì¶ Installation Flow\n\n## Phase 1: Infrastructure\n1. **Yggdrasil Setup**\n2. **Docker Environment**\n3. **SSL Certificates**\n\n## Phase 2: Core Services\n4. **PostgreSQL + Redis**\n5. **FastAPI Backend**\n6. **Nginx Reverse Proxy**\n\n## Phase 3: Integration\n7. **Telegram Bot**\n8. **Monitoring Stack**\n9. **Yggdrasil API**"
    },
    {
      "id": "network_topology",
      "x": 400,
      "y": -200,
      "width": 250,
      "height": 180,
      "type": "text",
      "text": "# üåê Network Topology\n\n## Docker Network (172.20.0.0/16)\n```\nNginx (80/443) ‚Üí FastAPI (6030)\n    ‚Üì              ‚Üì\nPostgreSQL       Redis\n    ‚Üì              ‚Üì\nPrometheus ‚Üí Grafana (3000)\n    ‚Üì\nTelegram Bot\n```\n\n## Yggdrasil Overlay Network\n```\nIPv6 Mesh: 200:421e:...\n‚Üì\nDedicated Yggdrasil API (6040)\n‚Üì\nSecure Backend Communication\n```\n\n## Security Zones\n- **üî¥ Public**: Nginx SSL termination\n- **üü¢ Container**: Docker bridge network\n- **üîµ Yggdrasil**: Private IPv6 mesh"
    },
    {
      "id": "new_features_discovered",
      "x": 400,
      "y": 50,
      "width": 250,
      "height": 150,
      "type": "text",
      "text": "# ‚ú® New Features Discovered\n\n## Advanced Integrations\n- **OCR Processing**: Document parsing\n- **GPT-4 Automation**: AI assistance\n- **WebSocket Real-time**: Live updates\n- **PDF Processing**: pdfplumber\n\n## Enterprise Features\n- **Health Checks**: All services\n- **Metrics Collection**: Prometheus\n- **Visualization**: Grafana dashboards\n- **Automated Backups**: PostgreSQL\n\n## Security Enhancements\n- **API Key Rotation**\n- **JWT Authentication**\n- **CORS Configuration**\n- **Request Validation**"
    },
    {
      "id": "development_workflow",
      "x": -600,
      "y": 300,
      "width": 350,
      "height": 180,
      "type": "text",
      "text": "# üíª Development Workflow\n\n## Workflow Sviluppatore\n**Scriviamo codice Python ‚Üí Testiamo su PC alex via Yggdrasil**\n\n### 1. Sviluppo Backend\n- **Scrivi API FastAPI**: Modifica file `.py` nelle routes\n- **Test locale**: `uvicorn main:app --reload` (porta 8000)\n- **Deploy container**: `docker-compose restart ftth-backend`\n\n### 2. Testing Frontend\n- **Pagine HTML statiche**: Cartella `web/publica/`\n- **Servite da Apache**: Accessibili su HTTPS\n- **API calls dinamici**: JavaScript con `fetch()`\n- **Configurazione automatica**: `API_BASE` punta a porta 6030\n\n### 3. Accesso da PC alex\n- **VPN Yggdrasil**: Connessione sicura IPv6\n- **IP autorizzato**: Solo `201:27c:546:5df7:176:95f3:c909:6834`\n- **Accesso diretto**: Alle porte 6030 (main API) e 6040 (Ygg API)\n- **Testing real-time**: Modifiche immediate visibili\n\n### 4. Debug & Troubleshooting\n- **Logs container**: `docker-compose logs ftth-backend`\n- **Network testing**: `curl` da PC alex\n- **Database check**: Query diretta PostgreSQL\n- **API documentation**: `/docs` endpoint\n\n## File di Test\n- **index.html**: Dashboard principale con statistiche\n- **gestionale.html**: Interfaccia gestionale completa\n- **manual_entry.html**: Inserimento manuale WR\n- **dashboard.html**: Dashboard tecnici\n- **db_viewer.html**: Visualizzatore database"
    }
  ],
  "edges": [
    {
      "id": "arch_to_components",
      "fromNode": "architecture_overview",
      "fromSide": "right",
      "toNode": "core_components",
      "toSide": "left",
      "label": "implements"
    },
    {
      "id": "arch_to_network",
      "fromNode": "architecture_overview",
      "fromSide": "bottom",
      "toNode": "network_topology",
      "toSide": "left",
      "label": "secured by"
    },
    {
      "id": "arch_to_new_features",
      "fromNode": "architecture_overview",
      "fromSide": "right",
      "toNode": "new_features_discovered",
      "toSide": "left",
      "label": "enhanced with"
    },
    {
      "id": "workflow_to_troubleshooting",
      "fromNode": "workflow_daily",
      "fromSide": "right",
      "toNode": "troubleshooting",
      "toSide": "left",
      "label": "when issues"
    },
    {
      "id": "install_to_workflow",
      "fromNode": "installation_flow",
      "fromSide": "right",
      "toNode": "workflow_daily",
      "toSide": "left",
      "label": "leads to"
    },
    {
      "id": "components_to_modules",
      "fromNode": "core_components",
      "fromSide": "bottom",
      "toNode": "module_canvas_links",
      "toSide": "top",
      "label": "detailed in"
    },
    {
      "id": "troubleshooting_to_modules",
      "fromNode": "troubleshooting",
      "fromSide": "bottom",
      "toNode": "module_canvas_links",
      "toSide": "right",
      "label": "solved in"
    },
    {
      "id": "network_to_troubleshooting",
      "fromNode": "network_topology",
      "fromSide": "bottom",
      "toNode": "troubleshooting",
      "toSide": "top",
      "label": "affects"
    },
    {
      "id": "workflow_to_development",
      "fromNode": "workflow_daily",
      "fromSide": "right",
      "toNode": "development_workflow",
      "toSide": "left",
      "label": "includes"
    }
  ]
}